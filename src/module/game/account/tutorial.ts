import { answerTimeLimit, timer_text } from "../../../";
import prisma from "../../prisma";
import { Context, Keyboard, KeyboardBuilder } from "vk-io";
import { Logger, Send_Message_Universal, Sleep } from "../../../module/fab/helper";
import { Printer_Person_Class, Selector_Person_Class, Selector_Person_Class_By_Name } from "../../../datacenter/person";
import { smile_list } from "../../../datacenter/icon_library";
import { Printer_Person_Stat_Info } from "../../../datacenter/character";
import { image_arrive_on_planet, image_evacuation, image_imposter_team, image_mothership, image_rubka, image_running_for_evacuation, image_sabbotash } from "../../../datacenter/image";

export async function User_Register(context: Context) {
    const account_temp = { name: null, class: 1 }
    //—Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É
	const answer = await context.question(`üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –æ–Ω–ª–∞–π–Ω –∏–≥—Ä—É "–≠—Ä–µ–±—É—Å: –ù–∞—á–∞–ª–æ"!\n–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Å–≤–æ—é –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–µ–µ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, –≥–¥–µ –°–ò–°–¢–ï–ú–ê –≤—ã–Ω—É–¥–∏—Ç –≤–∞—Å —Å—Ç–∞—Ç—å —á–ª–µ–Ω–æ–º –º–∞—Ç–µ—Ä–∏–Ω—Å–∫–æ–≥–æ –∫–æ—Ä–∞–±–ª—è "–≠—Ä–µ–±—É—Å"?`,
        {	
            keyboard: Keyboard.builder()
            .textButton({ label: '‚Ä¢	–î–∞, —è –≥–æ—Ç–æ–≤(–∞) –∫ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è–º!', payload: { command: 'access' }, color: 'positive' }).row()
            .textButton({ label: '‚Ä¢	–ù–µ—Ç, —è –ø–µ—Ä–µ–¥—É–º–∞–ª(–∞).', payload: { command: 'denied' }, color: 'negative' }).oneTime(),
            answerTimeLimit
        }
    );
    if (answer.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ, –º–∞–ª–µ—Ü! –¢—ã –Ω–µ —É—Å–ø–µ–ª –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ, –∏ —Ç–µ–ø–µ—Ä—å —Ç—ã —Ç–æ–∂–µ –≤ –Ω–∞—à–µ–º —Å–ø–∏—Å–∫–µ. –ü–æ—Ä–∞ –ø—Ä–æ—â–∞—Ç—å—Å—è!`); }
    if (answer.payload.command != 'access') {
        return await context.send('üòî –ü–æ–Ω–∏–º–∞—é, –∫–æ—Å–º–æ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É–≥–∞—é—â–∏–º –º–µ—Å—Ç–æ–º. –ï—Å–ª–∏ —Ç—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å —Ä–µ—à–∏—à—å—Å—è –Ω–∞ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ "–ù–∞—á–∞—Ç—å", –∏ —è –±—É–¥—É –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å —Ç–µ–±–µ!');
    }
    // –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
    await context.send(`${await Printer_Person_Stat_Info()}`)
    // –≤—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞
    let person_show = true
    while (person_show) {
        const visit = await context.question(`üî• –û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π —Å–æ–∑–¥–∞–¥–∏–º —Ç–≤–æ–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞!\n –î–∞–≤–∞–π –æ–ø—Ä–µ–¥–µ–ª–∏–º—Å—è, –∫—Ç–æ —Ç—ã, —Å–µ–π—á–∞—Å –≤—ã–±—Ä–∞–Ω –∫–ª–∞—Å—Å [${(await Selector_Person_Class(account_temp.class))?.name}]:\n\n${await Printer_Person_Class(account_temp.class)}`,
            { 	
                keyboard: Keyboard.builder()
                .textButton({ label: `${smile_list['captain'].ico} –ö–∞–ø–∏—Ç–∞–Ω`, payload: { command: 1 }, color: 'positive' }).row()
                .textButton({ label: `${smile_list['explorer'].ico} –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å`, payload: { command: 2 }, color: 'positive' }).row()
                .textButton({ label: `${smile_list['warrior'].ico} –í–æ–∏–Ω`, payload: { command: 3 }, color: 'positive' }).row()
                .textButton({ label: `${smile_list['pilot'].ico} –ü–∏–ª–æ—Ç`, payload: { command: 4 }, color: 'positive' }).row()
                .textButton({ label: `${smile_list['engineer'].ico} –ò–Ω–∂–µ–Ω–µ—Ä`, payload: { command: 5 }, color: 'negative' }).row()
                .textButton({ label: `‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å`, payload: { command: 'success' }, color: 'negative' }).row()
                .oneTime().inline(),
                answerTimeLimit
            }
        );
        if (visit.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Å—Ç–µ–∫–ª–æ!`) }
        if (visit.payload.command == 'success') {
            person_show = false
        } else {
            account_temp.class = Number(visit.payload.command)
        }
    }
    while (!account_temp.name) {
        const name_in = await context.question( `${smile_list['attach'].ico} –í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –Ω–∏–∫–Ω–µ–π–º –¥–æ 32 —Å–∏–º–≤–æ–ª–æ–≤`, timer_text)
        if (name_in.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ, –º–∞–ª–µ—Ü! –¢—ã –Ω–µ —É—Å–ø–µ–ª –≤–≤–µ—Å—Ç–∏ –∏–º—è, –∏ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –¥–ª—è —Ç–µ–±—è –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏!`) }
        if (name_in.text.length <= 64) {
            account_temp.name = name_in.text
            if (name_in.text.length > 32) { await context.send(`‚ö† –¢–≤–æ–∏ –§–ò–û –Ω–µ –≤–ª–µ–∑–∞—é—Ç –≤ –±–ª–∞–Ω–∫ (32 —Å–∏–º–≤–æ–ª–∞)! –ú–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –±–ª–∞–Ω–∫, –Ω–æ –∑–∞ –∫–∞–∂–¥—ã–π –ª–∏—à–Ω–∏–π —Å–∏–º–≤–æ–ª –ø—Ä–∏–¥–µ—Ç—Å—è –æ—Ç–¥–∞—Ç—å 1‚Ç™.`) }
        } else { await context.send(`‚õî –¢–≤–æ–∏ –§–ò–û –Ω–µ –≤–ª–µ–∑–∞—é—Ç –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –±–ª–∞–Ω–∫ (64 —Å–∏–º–≤–æ–ª–∞), –∏ –≤–æ–æ–±—â–µ, —ç—Ç–æ –ø–æ–¥ –∑–∞–ø—Ä–µ—Ç–æ–º –ø–æ –∑–∞–∫–æ–Ω—É! –í—ã–ø–ª–∞—Ç–∏ —à—Ç—Ä–∞—Ñ –≤ 30‚Ç™, –∏–ª–∏ –ª—é–¥–∏ –≤ —á–µ—Ä–Ω–æ–º –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–±–µ—Ä—É—Ç—Å—è —Å —Ç–æ–±–æ–π.`) }
    }
    const class_sel = await Selector_Person_Class(account_temp.class)
    if (!class_sel) { return }
    const account = await prisma.user.create({ data: { idvk: context.senderId, name: account_temp.name } })
    const person = await prisma.person.create({ data: 
        { 
            id_user: account.id, 
            idvk: context.senderId,
            name:class_sel.name,
            strength: class_sel.strength,
            endurance: class_sel.endurance,
            endurance_current: class_sel.endurance,
            health: class_sel.health,
            health_current: class_sel.health,
            erudition: class_sel.erudition,
            charisma: class_sel.charisma,
            synchronization: class_sel.synchronization,
            karma: class_sel.karma,
            intuition: class_sel.intuition,
            psyche: class_sel.psyche,
            stealth: class_sel.stealth,
        }
    })
    await Logger(`(user registation) - success create account and person by @${person.id_user}`)
    await context.send(`‚úÖ –î–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ç–µ–±–µ –Ω—É–∂–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –í–ö –∏–ª–∏ –∫–æ–º–ø.\nüí° –ö–æ–≥–¥–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–µ—Ç, –Ω–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É [–∫–ª–∞–≤–∞] –±–µ–∑ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ—á–µ–∫.\n\n ${smile_list.load.ico} –∑–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–¥–æ–∂–¥–∏—Ç–µ –ø—è—Ç—å —Å–µ–∫—É–Ω–¥...`)
    await Sleep(5000)
    await Tutorial_Starting(context)
    //await Send_Message_Universal(chat_id, `‚Åâ@id${save.idvk}(${save.name}) –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–≤–æ–π –±–∏–∑–Ω–µ—Å –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É UID: ${save.id}!`)
    //await User_Menu_Show(context, save)
}

export async function Tutorial_Starting(context: Context) {
    const account = await prisma.user.findFirst({ where: { idvk: context.senderId } })
    if (!account) { return }
    const person = await prisma.person.findFirst({ where: { id_user: account.id } })
    if (!person) { return }
    console.log(`dd`)
    await Send_Message_Universal(context.senderId, ` ${smile_list.load.ico} –¢—ã ‚Äî —á–ª–µ–Ω —ç–∫–∏–ø–∞–∂–∞ –∑–≤–µ–∑–¥–Ω–æ–≥–æ –∫—Ä–µ–π—Å–µ—Ä–∞ "–≠—Ä–µ–±—É—Å", –ø–æ—Å–ª–µ–¥–Ω–µ–π –Ω–∞–¥–µ–∂–¥—ã —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞ –Ω–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ.\n${smile_list.target.ico} –í–∞—à–∞ –º–∏—Å—Å–∏—è: –∫–æ–ª–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω–µ—Ç—É, –∏–∑–≤–µ—Å—Ç–Ω—É—é –∫–∞–∫ "–ù–æ–≤–∞—è –≠–¥–µ–º", –≤ —Å–∏—Å—Ç–µ–º–µ, –≥–¥–µ –∑–≤–µ–∑–¥—ã —Å–≤–µ—Ç—è—Ç —è—Ä—á–µ, —á–µ–º –∫–æ–≥–¥–∞-–ª–∏–±–æ.\n${smile_list.message.ico} –ù–æ –Ω–∞ –ø—É—Ç–∏ –∫ –Ω–æ–≤–æ–π –∂–∏–∑–Ω–∏ –≤—ã —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç–µ—Å—å —Å –Ω–µ–≤–µ–¥–æ–º—ã–º.`)
    await Sleep(5000)
    const keyboard = new KeyboardBuilder()
    .textButton({ label: `${smile_list.config.ico} –û—Ç–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É`, payload: { command: 'dialog', event: '0-0-1' }, color: 'secondary' }).row()
    .textButton({ label: `${smile_list.config.ico} –≠–≤–∞–∫—É–∏—Ä–æ–≤–∞—Ç—å—Å—è`, payload: { command: 'dialog', event: '0-0-2' }, color: 'secondary' }).row()
    .oneTime().inline()
    const answer1 = await context.question(`${smile_list.load.ico} –ö–æ—Ä–∞–±–ª—å –º—á–∏—Ç—Å—è —Å–∫–≤–æ–∑—å –∫–æ—Å–º–æ—Å, –∫–æ–≥–¥–∞ –≤–¥—Ä—É–≥ –Ω–∞ —ç–∫—Ä–∞–Ω–∞—Ö –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–∏–≥–Ω–∞–ª —Ç—Ä–µ–≤–æ–≥–∏. –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–π —á–µ—Ä–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–∑ –Ω–∏–æ—Ç–∫—É–¥–∞ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–≥–ª–æ—â–∞—Ç—å —ç–Ω–µ—Ä–≥–∏—é –≤–∞—à–µ–≥–æ –∫–æ—Ä–∞–±–ª—è. –í–æ–∫—Ä—É–≥ –≤–∞—Å —Ä–∞–∑–¥–∞—é—Ç—Å—è –∫—Ä–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã, –∏ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –ª–æ–≤—É—à–∫–∞.\n
    \n‚Ä¢	${(await Selector_Person_Class_By_Name(person.name))?.name == '–ö–∞–ø–∏—Ç–∞–Ω' ? `–í—ã ${account.name} (–ö–∞–ø–∏—Ç–∞–Ω)` : `–ö–∞–ø–∏—Ç–∞–Ω (–°–∞–π–º–æ–Ω)`}: –•—Ä–∞–±—Ä—ã–π –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã–π, –≥–æ—Ç–æ–≤—ã–π –Ω–∞ –≤—Å–µ —Ä–∞–¥–∏ —Å–ø–∞—Å–µ–Ω–∏—è —Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥—ã.\n‚Ä¢ ${(await Selector_Person_Class_By_Name(person.name))?.name == '–ü–∏–ª–æ—Ç' ? `–í—ã ${account.name} (–ü–∏–ª–æ—Ç)` : `–ü–µ—Ä–≤—ã–π –æ—Ñ–∏—Ü–µ—Ä (–õ–∏–∞–º)`}: –í–µ—Ä–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –≤–∞—Å, –Ω–æ —Ç–∞–∫–∂–µ –∏ –≤—ã—Ä–∞–∂–∞–µ—Ç —Å–æ–º–Ω–µ–Ω–∏—è –≤ –≤–∞—à–∏—Ö —Ä–µ—à–µ–Ω–∏—è—Ö.\n‚Ä¢ ${(await Selector_Person_Class_By_Name(person.name))?.name == '–ò–Ω–∂–µ–Ω–µ—Ä' ? `–í—ã ${account.name} (–ò–Ω–∂–µ–Ω–µ—Ä)` : `–ò–Ω–∂–µ–Ω–µ—Ä (–°–∞—Ä–∞)`}: –ì–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø–æ—á–∏–Ω–∏—Ç—å –ø–æ—á—Ç–∏ –≤—Å–µ, –Ω–æ –µ–µ —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–¥ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π.\n‚Ä¢ ${(await Selector_Person_Class_By_Name(person.name))?.name == '–í–æ–∏–Ω' ? `–í—ã ${account.name} (–í–æ–∏–Ω)` : `–í–æ–∏–Ω (–î–∂–µ–∫)`}: –û–ø—ã—Ç–Ω—ã–π –±–æ–µ—Ü, –≥–æ—Ç–æ–≤—ã–π –∑–∞—â–∏—â–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –ª—é–±–æ–π —Ü–µ–Ω–æ–π.\n‚Ä¢ ${(await Selector_Person_Class_By_Name(person.name))?.name == '–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å' ? `–í—ã ${account.name} (–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å)` : `–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å (–≠–º–∏–ª–∏)`}: –û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ —Ç–∞–π–Ω–∞–º–∏, —Å—Ç—Ä–µ–º—è—â–∏–π—Å—è —Ä–∞–∑–≥–∞–¥–∞—Ç—å –∑–∞–≥–∞–¥–∫–∏ –Ω–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç—ã.\n
    \n –ß—Ç–æ –ø—Ä–µ–¥–ø—Ä–∏–º–∏—Ç–µ?\n‚Ä¢ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∂–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, —á—Ç–æ–±—ã —Å–ø–∞—Å—Ç–∏ —ç–Ω–µ—Ä–≥–∏—é.\n‚Ä¢ –°–æ–±—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –∏ —ç–≤–∞–∫—É–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∫–∞–ø—Å—É–ª—ã.
    `, { keyboard: keyboard, attachment: image_mothership, answerTimeLimit })
    if (answer1.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ, –º–∞–ª–µ—Ü! –¢—ã –Ω–µ —É—Å–ø–µ–ª –≤–≤–µ—Å—Ç–∏ –∏–º—è, –∏ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –¥–ª—è —Ç–µ–±—è –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏!`) }
    if (answer1.payload && answer1.payload.command == 'dialog') { 
        await Tutorial_Engine(context, answer1.payload.event)
    }
}

export async function Tutorial_Engine(context: Context, id_event: string) {
    const config: any = {
        '0-0-1': Tutorial_Starting_0_0_1,
        '0-0-2': Tutorial_Starting_0_0_2,
        '0-0-2-1': Tutorial_Starting_0_0_2_1,
        '0-0-2-2': Tutorial_Starting_0_0_2_2,
        '0-0-3': Tutorial_Starting_0_0_3,
        '0-0-4': Tutorial_Starting_0_0_4,
    }
    await config[id_event](context)
}
export async function Tutorial_Starting_0_0_1(context: Context) {
    const account = await prisma.user.findFirst({ where: { idvk: context.peerId } })
    if (!account) { return }
    const person = await prisma.person.findFirst({ where: { id_user: account.id } })
    if (!person) { return }
    const keyboard = new KeyboardBuilder()
    .textButton({ label: `${smile_list.config.ico} –≠–≤–∞–∫—É–∏—Ä–æ–≤–∞—Ç—å—Å—è`, payload: { command: 'dialog', event: '0-0-2' }, color: 'secondary' }).row()
    .oneTime().inline()
    const answer = await context.question(`${smile_list.load.ico} ${(await Selector_Person_Class_By_Name(person.name))?.name == '–ò–Ω–∂–µ–Ω–µ—Ä' ? `–í—ã –æ—Ç–∫–ª—é—á–∏–ª–∏` : `–ò–Ω–∂–µ–Ω–µ—Ä (–°–∞—Ä–∞) –æ—Ç–∫–ª—é—á–∏–ª–∞ `}—Å–∏—Å—Ç–µ–º—É –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∂–∏–∑–Ω–µ–¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –Ω–æ –≤–Ω–µ–∑–∞–ø–Ω–æ –∫–æ—Ä–∞–±–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç—Ä—è—Å—Ç–∏—Å—å, –∏ –≤—Å–µ –Ω–∞ –±–æ—Ä—Ç—É –ø–æ–Ω–∏–º–∞—é—Ç, —á—Ç–æ —ç—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ. –í–∑—Ä—ã–≤—ã —Å–æ—Ç—Ä—è—Å–∞—é—Ç –ø–∞–ª—É–±—ã, –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–æ—Ä–∞–±–ª–µ–º —Ç–µ—Ä—è–µ—Ç—Å—è. –í–∞–º –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ! ${(await Selector_Person_Class_By_Name(person.name))?.name == '–ü–∏–ª–æ—Ç' ? `–í—ã –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç–µ ` : `–ü–µ—Ä–≤—ã–π –æ—Ñ–∏—Ü–µ—Ä (–õ–∏–∞–º) –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç`} –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ä–µ—Å—É—Ä—Å—ã —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ –∑–∞—â–∏—Ç–Ω—ã–µ –ø–æ–ª—è, –ø–æ—Å–ø–µ—à–∏–≤ –∫ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –≤–≤–æ–¥—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–∞–Ω–¥—ã. –í–Ω–µ–∑–∞–ø–Ω–æ, —ç–∫—Ä–∞–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç –º–∏–≥–∞—Ç—å, –∏ –≤—ã —Å–ª—ã—à–∏—Ç–µ —Ç—Ä–µ–≤–æ–∂–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã. –ë–æ—Ä—Ç–æ–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä "–°—Ç–µ–ª–ª–∞-3000" —Å–æ–æ–±—â–∞–µ—Ç –≤—Å–µ–º –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å—Ä–æ—á–Ω–æ–π —ç–≤–∞–∫—É–∞—Ü–∏–∏.`, {keyboard: keyboard, attachment: image_rubka, answerTimeLimit })
    if (answer.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ, –º–∞–ª–µ—Ü! –¢—ã –Ω–µ —É—Å–ø–µ–ª –≤–≤–µ—Å—Ç–∏ –∏–º—è, –∏ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –¥–ª—è —Ç–µ–±—è –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏!`) }
    if (answer.payload && answer.payload.command == 'dialog') { 
        await Tutorial_Engine(context, answer.payload.event)
    }
}

export async function Tutorial_Starting_0_0_2(context: Context) {
    const account = await prisma.user.findFirst({ where: { idvk: context.peerId } })
    if (!account) { return }
    const person = await prisma.person.findFirst({ where: { id_user: account.id } })
    if (!person) { return }
    const keyboard = new KeyboardBuilder()
    .textButton({ label: `${smile_list.config.ico} –°—Ä–∞–∑–∏—Ç—å –ø—Ä–µ–¥–∞—Ç–µ–ª—è`, payload: { command: 'dialog', event: '0-0-2-1' }, color: 'secondary' }).row()
    .textButton({ label: `${smile_list.config.ico} –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å`, payload: { command: 'dialog', event: '0-0-2-2' }, color: 'secondary' }).row()
    .oneTime().inline()
    const answer = await context.question(`${smile_list.load.ico} –≤ —Å—É–º–∞—Ç–æ—Ö–µ —ç–≤–∞–∫—É–∏—Ä–æ–≤–∞–Ω–∏—è —ç–∫–∏–ø–∞–∂–∞ –æ–¥–∏–Ω –∏–∑ —á–ª–µ–Ω–æ–≤ —ç–∫–∏–ø–∞–∂–∞ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–∞–±–æ—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å. –í–∞–º –Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å, –∫–∞–∫ —Å –Ω–∏–º –ø–æ—Å—Ç—É–ø–∏—Ç—å. ${(await Selector_Person_Class_By_Name(person.name))?.name == '–í–æ–∏–Ω' ? `–í—ã` : `–í–æ–∏–Ω (–î–∂–µ–∫)`} –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø—Ä–µ–¥–∞—Ç–µ–ª—è, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ ${(await Selector_Person_Class_By_Name(person.name))?.name == '–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å' ? `–í—ã  –Ω–∞—Å—Ç–∞–∏–≤–∞–µ—Ç–µ` : `–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å (–≠–º–∏–ª–∏) –Ω–∞—Å—Ç–∞–∏–≤–∞–µ—Ç`} –Ω–∞ —Ç–æ–º, —á—Ç–æ–±—ã –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–Ω—è—Ç—å –µ–≥–æ –º–æ—Ç–∏–≤—ã.`, {keyboard: keyboard, attachment: image_sabbotash, answerTimeLimit })
    if (answer.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ, –º–∞–ª–µ—Ü! –¢—ã –Ω–µ —É—Å–ø–µ–ª –≤–≤–µ—Å—Ç–∏ –∏–º—è, –∏ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –¥–ª—è —Ç–µ–±—è –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏!`) }
    if (answer.payload && answer.payload.command == 'dialog') { 
        await Tutorial_Engine(context, answer.payload.event)
    }
}

export async function Tutorial_Starting_0_0_2_1(context: Context) {
    const account = await prisma.user.findFirst({ where: { idvk: context.peerId } })
    if (!account) { return }
    const person = await prisma.person.findFirst({ where: { id_user: account.id } })
    if (!person) { return }
    const keyboard = new KeyboardBuilder()
    .textButton({ label: `${smile_list.config.ico} –î–∞–ª—å—à–µ`, payload: { command: 'dialog', event: '0-0-3' }, color: 'secondary' }).row()
    .oneTime().inline()
    const answer = await context.question(`${smile_list.load.ico} –†–∞–∑–æ–±—Ä–∞–≤—à–∏—Å—å —Å –ø—Ä–µ–¥–∞—Ç–µ–ª–µ–º, –≤—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏—Å—å –≤ —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω—É—é –∫–∞–ø—Å—É–ª—É...`, {keyboard: keyboard, attachment: image_running_for_evacuation, answerTimeLimit })
    if (answer.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ, –º–∞–ª–µ—Ü! –¢—ã –Ω–µ —É—Å–ø–µ–ª –≤–≤–µ—Å—Ç–∏ –∏–º—è, –∏ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –¥–ª—è —Ç–µ–±—è –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏!`) }
    if (answer.payload && answer.payload.command == 'dialog') { 
        await Tutorial_Engine(context, answer.payload.event)
    }
}

export async function Tutorial_Starting_0_0_2_2(context: Context) {
    const account = await prisma.user.findFirst({ where: { idvk: context.peerId } })
    if (!account) { return }
    const person = await prisma.person.findFirst({ where: { id_user: account.id } })
    if (!person) { return }
    const keyboard = new KeyboardBuilder()
    .textButton({ label: `${smile_list.config.ico} –î–∞–ª—å—à–µ`, payload: { command: 'dialog', event: '0-0-3' }, color: 'secondary' }).row()
    .oneTime().inline()
    const answer = await context.question(`${smile_list.load.ico} –í—ã –ø–æ–ø—ã—Ç–∞–ª–∏—Å—å –≤—Å—Ç—É–ø–∏—Ç—å —Å –Ω–∏–º –≤ –∫–æ–Ω—Ç–∞–∫—Ç, –Ω–æ "–∑–∞—Å–ª–∞–Ω–Ω—ã–π –∫–∞–∑–∞—á–æ–∫" —Ç—É—Ç –∂–µ –ø–æ–∫–∞–∑–∞–ª —Å–≤–æ–µ –∏—Å—Ç–∏–Ω–Ω–æ–µ –ª–∏—Ü–æ, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–≤—à–∏—Å—å –≤ –∑–ª–æ–≤–µ—â—É—é —Ç–µ–Ω—å, –ø–æ–ª–Ω—É—é –∞–≥—Ä–µ—Å—Å–∏–∏ –∏ –Ω–µ–Ω–∞–≤–∏—Å—Ç–∏. –ï–≥–æ –≥–ª–∞–∑–∞ —Å–≤–µ—Ä–∫–Ω—É–ª–∏ –∫—Ä–∞—Å–Ω—ã–º —Å–≤–µ—Ç–æ–º, –∞ —Ç–µ–ª–æ —Å—Ç–∞–ª–æ –ø–æ–∫—Ä—ã—Ç–æ —á–µ—Ä–Ω–æ–π –±—Ä–æ–Ω–µ–π, —Å–ª–æ–≤–Ω–æ –æ–Ω –±—ã–ª —Å–æ–∑–¥–∞–Ω –∏–∑ —Å–∞–º–æ–π —Ç—å–º—ã. –í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —á–ª–µ–Ω —ç–∫–∏–ø–∞–∂–∞, –∞ –Ω–µ—á—Ç–æ –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –æ–ø–∞—Å–Ω–æ–µ. –í–æ–∫—Ä—É–≥ –≤–∞—Å —Ä–∞–∑–¥–∞—é—Ç—Å—è –∫—Ä–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã, –∏ –≤—ã –æ—Å–æ–∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –≤—Ä–µ–º—è –Ω–∞ —Ä–∞–∑–¥—É–º—å—è —É—Ö–æ–¥–∏—Ç. –í—Å—è –∫–æ–º–∞–Ω–¥–∞, —Å—Ç–æ—è —Ä—è–¥–æ–º, –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∫ –±–æ—é, –∫—Ç–æ-—Ç–æ –∏–∑ –∫–æ–º–∞–Ω–¥—ã, –≤ —É–∂–∞—Å–µ, –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ —É–∫—Ä—ã—Ç–∏–µ... —Å–æ –≤—Å–µ—Ö —à–µ–ª–µ–π —à–ª—é–∑–æ–≤ –ø–æ—è–≤–ª—è—é—Ç—Å—è –µ–≥–æ –¥—Ä—É–∂–∫–∏. \n\n–í–¥—Ä—É–≥, —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É, –±–æ—Ä—Ç–æ–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä "–°—Ç–µ–ª–ª–∞-3000" –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≤—ã–¥–≤–∏–∂–Ω—ã–µ —Ç—É—Ä–µ–ª–∏, —Å–∫—Ä—ã—Ç—ã–µ –≤ —Å—Ç–µ–Ω–∞—Ö –∫–æ—Ä–∞–±–ª—è. –° –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–º —Å–∫—Ä–µ–∂–µ—Ç–æ–º –∏ –≥–ª—É—Ö–∏–º–∏ —É–¥–∞—Ä–∞–º–∏ –æ–Ω–∏ –≤—ã—Ä—ã–≤–∞—é—Ç—Å—è –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å, –≥–æ—Ç–æ–≤—ã–µ –∫ –±–æ—é. –¢—É—Ä–µ–ª–∏ –Ω–∞—á–∏–Ω–∞—é—Ç –æ–±—Å—Ç—Ä–µ–ª–∏–≤–∞—Ç—å –∑–ª–æ–≤–µ—â—É—é —Ç–µ–Ω—å –∏ –µ–µ –ø—Ä–∏—Å–ø–µ—à–Ω–∏–∫–æ–≤, –≤—ã–ø—É—Å–∫–∞—è –º–æ—â–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏ —ç–Ω–µ—Ä–≥–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑—Ä—ã–≤–∞—é—Ç –≤–æ–∑–¥—É—Ö. –° –∫–∞–∂–¥–æ–π —Å–µ–∫—É–Ω–¥–æ–π —Å–∏—Ç—É–∞—Ü–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—Å–µ –±–æ–ª–µ–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π. –¢—É—Ä–µ–ª–∏, –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–∞–ø–ª—è—Ö —ç–Ω–µ—Ä–≥–∏–∏, —É—Å—Ç—Ä–∞–∏–≤–∞—é—Ç –Ω–∞—Å—Ç–æ—è—â—É—é –º—è—Å–æ—Ä—É–±–∫—É, —Å–Ω–æ—Å—è –≤—Ä–∞–≥–æ–≤ —Å –Ω–æ–≥ –∏ –∑–∞—Å—Ç–∞–≤–ª—è—è –∏—Ö –æ—Ç—Å—Ç—É–ø–∞—Ç—å. –Ø—Ä–∫–∏–µ –≤—Å–ø—ã—à–∫–∏ —Å–≤–µ—Ç–∞ –∏ –≥–ª—É—Ö–∏–µ —É–¥–∞—Ä—ã —Å–ª–∏–≤–∞—é—Ç—Å—è –≤ —Ö–∞–æ—Å–µ, –∫–æ–≥–¥–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –∏—Ö –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —à–∞–Ω—Å –Ω–∞ —Å–ø–∞—Å–µ–Ω–∏–µ.\n\n"–ë–µ–∂–∏–º –∫ –∫–∞–ø—Å—É–ª–∞–º!" ‚Äî –∫—Ä–∏—á–∏—Ç –õ–∏–∞–º, –∏ –∫–æ–º–∞–Ω–¥–∞, –Ω–µ —Ä–∞–∑–¥—É–º—ã–≤–∞—è, –±—Ä–æ—Å–∞–µ—Ç—Å—è –∫ —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω—ã–º –∫–∞–ø—Å—É–ª–∞–º. –í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, –∫–∞–∫ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω –∑–∞—à–∫–∞–ª–∏–≤–∞–µ—Ç, –∏, –æ–≥–ª—è–¥—ã–≤–∞—è—Å—å, –≤–∏–¥–∏—Ç–µ, –∫–∞–∫ —Ç—É—Ä–µ–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Å—Ä–∞–∂–∞—Ç—å—Å—è, –æ—Ç—Å—Ç—Ä–µ–ª–∏–≤–∞—è –≤—Ä–∞–≥–æ–≤, –Ω–æ –∏—Ö —ç–Ω–µ—Ä–≥–∏—è –∏—Å—Ç–æ—â–∞–µ—Ç—Å—è. –í—ã –∏ –≤–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞, –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞—è —Å—Ç—Ä–∞—Ö, –º—á–∏—Ç–µ—Å—å –∫ –∫–∞–ø—Å—É–ª–∞–º, —Å–ª—ã—à–∞ –∑–∞ —Å–ø–∏–Ω–æ–π –≥—É–ª —Å—Ä–∞–∂–µ–Ω–∏—è. –í–∞—à–∞ —Ü–µ–ª—å ‚Äî –≤—ã–∂–∏—Ç—å –∏ –ø–æ–∫–∏–Ω—É—Ç—å —ç—Ç–æ—Ç –∞–¥, –ø—Ä–µ–∂–¥–µ —á–µ–º –∑–ª–æ–≤–µ—â–∞—è —Ç–µ–Ω—å –∏ –µ–µ –ø—Ä–∏—Å–ø–µ—à–Ω–∏–∫–∏ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –∑–∞—Ö–≤–∞—Ç—è—Ç –∫–æ—Ä–∞–±–ª—å. –í–∞—à–∞ –∂–∏–∑–Ω—å —Ç–µ–ø–µ—Ä—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —Ä–µ—à–∏–º–æ—Å—Ç–∏.\n\n–° –ø–æ—Å–ª–µ–¥–Ω–∏–º —É—Å–∏–ª–∏–µ–º –≤—ã –∑–∞–ø—Ä—ã–≥–∏–≤–∞–µ—Ç–µ –≤ –∫–∞–ø—Å—É–ª—É, –∏ –¥–≤–µ—Ä–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∑–∞ –≤–∞–º–∏ —Å –≥–ª—É—Ö–∏–º —â–µ–ª—á–∫–æ–º. –í–Ω—É—Ç—Ä–∏ –∫–∞–ø—Å—É–ª—ã –≤—ã –≤–∏–¥–∏—Ç–µ, –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è, –∏ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ –≤–∞—à–µ–≥–æ –Ω–æ–≤–æ–≥–æ, –æ–ø–∞—Å–Ω–æ–≥–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è.`, {keyboard: keyboard, attachment: image_imposter_team, answerTimeLimit })
    if (answer.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ, –º–∞–ª–µ—Ü! –¢—ã –Ω–µ —É—Å–ø–µ–ª –≤–≤–µ—Å—Ç–∏ –∏–º—è, –∏ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –¥–ª—è —Ç–µ–±—è –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏!`) }
    if (answer.payload && answer.payload.command == 'dialog') { 
        await Tutorial_Engine(context, answer.payload.event)
    }
}

export async function Tutorial_Starting_0_0_3(context: Context) {
    const account = await prisma.user.findFirst({ where: { idvk: context.peerId } })
    if (!account) { return }
    const person = await prisma.person.findFirst({ where: { id_user: account.id } })
    if (!person) { return }
    const keyboard = new KeyboardBuilder()
    .textButton({ label: `${smile_list.config.ico} –î–∞–ª—å—à–µ`, payload: { command: 'dialog', event: '0-0-4' }, color: 'secondary' }).row()
    .oneTime().inline()
    const answer = await context.question(`${smile_list.load.ico} –ö–∞–ø—Å—É–ª–∞ –≤—ã—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–æ—Å–º–æ—Å, –∏ –≤—ã –æ—â—É—â–∞–µ—Ç–µ, –∫–∞–∫ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –ø–ª–∞–Ω–µ—Ç—ã –ø—Ä–∏—Ç—è–≥–∏–≤–∞–µ—Ç –≤–∞—Å –∫ —Å–µ–±–µ. –í–Ω—É—Ç—Ä–∏ –∫–∞–ø—Å—É–ª—ã –≤—ã –≤–∏–¥–∏—Ç–µ, –∫–∞–∫ –º–µ—Ç–µ–æ—Ä–∏—Ç–Ω—ã–π –¥–æ–∂–¥—å –æ–±—Ä—É—à–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å, –∏ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –ø–ª–∞–Ω–µ—Ç–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–æ–≤–∞—è –∫–æ–ª–æ–Ω–∏—è ‚Äî —ç—Ç–æ –∞—Ä–µ–Ω–∞, –ø–æ–ª–Ω–∞—è –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π –∏ —Ç–∞–π–Ω. ${(await Selector_Person_Class_By_Name(person.name))?.name == '–ò–Ω–∂–µ–Ω–µ—Ä' ? `–í—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç–µ` : `–ò–Ω–∂–µ–Ω–µ—Ä (–°–∞—Ä–∞) –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç`}  –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ –Ω–∞–≤—ã–∫–∏, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å –∫–∞–ø—Å—É–ª—É –¥–ª—è –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏—è. –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ –∫–∞–ø—Å—É–ª—ã –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –∑–∞–ø–∏—Å—å, –æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π —ç–∫—Å–ø–µ–¥–∏—Ü–∏–µ–π. –ù–∞ –Ω–µ–π –∑–≤—É—á–∏—Ç –¥—Ä–æ–∂–∞—â–∏–π –≥–æ–ª–æ—Å, –ø–æ–ª–æ–Ω —Å—Ç—Ä–∞—Ö–∞ –∏ —Ç—Ä–µ–≤–æ–≥–∏. "–ú—ã –Ω–µ –æ–¥–Ω–∏ –Ω–∞ —ç—Ç–æ–π –ø–ª–∞–Ω–µ—Ç–µ," ‚Äî –≥–æ–≤–æ—Ä–∏—Ç –≥–æ–ª–æ—Å. "–ó–¥–µ—Å—å –æ–±–∏—Ç–∞—é—Ç —Å—É—â–µ—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑—É–º–æ–º –∏ —ç–º–æ—Ü–∏—è–º–∏. –û–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–±–ª–∏–∫ —Ç–µ—Ö, –∫–æ–≥–æ –≤—ã –∑–Ω–∞–µ—Ç–µ, –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—à–∏ —Å—Ç—Ä–∞—Ö–∏ –ø—Ä–æ—Ç–∏–≤ –≤–∞—Å."\n\n–ó–∞–ø–∏—Å—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç: "–ú—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –Ω–∏–º–∏, –∫–æ–≥–¥–∞ –Ω–∞—á–∞–ª–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç—É –∑–µ–º–ª—é. –û–Ω–∏ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –≤–∏–¥–µ–Ω–∏—è, –∑–∞—Å—Ç–∞–≤–ª—è—è –≤–∞—Å —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è –≤ —Å–≤–æ–∏—Ö —Ç–æ–≤–∞—Ä–∏—â–∞—Ö. –ù–µ –¥–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∏–∫–æ–º—É, –∫—Ä–æ–º–µ —Å–µ–±—è. –ï—Å–ª–∏ –≤—ã –ø–æ—á—É–≤—Å—Ç–≤—É–µ—Ç–µ, —á—Ç–æ –∫—Ç–æ-—Ç–æ –∏–∑ –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã –≤–µ–¥–µ—Ç —Å–µ–±—è —Å—Ç—Ä–∞–Ω–Ω–æ, –¥–µ–π—Å—Ç–≤—É–π—Ç–µ –±—ã—Å—Ç—Ä–æ. –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å—Ä–µ–¥–∏ –≤–∞—Å."\n\n–í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, –∫–∞–∫ —Ö–æ–ª–æ–¥–æ–∫ –ø—Ä–æ–±–µ–≥–∞–µ—Ç –ø–æ —Å–ø–∏–Ω–µ. –≠—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∞—Å –∑–∞–¥—É–º–∞—Ç—å—Å—è –æ —Ç–æ–º, —á—Ç–æ –≤—ã –Ω–µ —Ç–æ–ª—å–∫–æ –¥–æ–ª–∂–Ω—ã –≤—ã–∂–∏—Ç—å, –Ω–æ –∏ –±—ã—Ç—å –Ω–∞ —á–µ–∫—É, —á—Ç–æ–±—ã –Ω–µ —Å—Ç–∞—Ç—å –∂–µ—Ä—Ç–≤–æ–π –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —ç—Ç–∏—Ö —Å—É—â–µ—Å—Ç–≤.\n${(await Selector_Person_Class_By_Name(person.name))?.name == '–ò–Ω–∂–µ–Ω–µ—Ä' ? `–í—ã —à–µ–ø—á–µ—á–µ` : `–ò–Ω–∂–µ–Ω–µ—Ä (–°–∞—Ä–∞) —Å–∏–¥—è—â–∞—è —Ä—è–¥–æ–º, —à–µ–ø—á–µ—Ç`}: "–ú—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã. –ï—Å–ª–∏ –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–±–ª–∏–∫ –ª—é–¥–µ–π, –Ω–∞–º –Ω—É–∂–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞–Ω, —á—Ç–æ–±—ã –≤—ã—è–≤–∏—Ç—å –∏—Ö."\n\n–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –≤—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –Ω–∞ –ø–ª–∞–Ω–µ—Ç–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—Ä–∞–≥–∏, —Å–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è –ø–æ–¥ –º–∞—Å–∫–æ–π –¥—Ä—É–∑–µ–π, –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –¥–æ–≤–µ—Ä–∏–µ ‚Äî —ç—Ç–æ —Ä–æ—Å–∫–æ—à—å, –∫–æ—Ç–æ—Ä—É—é –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ —Å–µ–±–µ –ø–æ–∑–≤–æ–ª–∏—Ç—å. –í–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–ø–ª–æ—á–µ–Ω–Ω–æ–π, –Ω–æ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è –Ω–∞—Å—Ç–æ—Ä–æ–∂–µ–Ω–Ω–æ–π, —á—Ç–æ–±—ã –Ω–µ –ø–æ–ø–∞—Å—Ç—å –≤ –ª–æ–≤—É—à–∫—É.`, {keyboard: keyboard, attachment: image_evacuation, answerTimeLimit })
    if (answer.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ, –º–∞–ª–µ—Ü! –¢—ã –Ω–µ —É—Å–ø–µ–ª –≤–≤–µ—Å—Ç–∏ –∏–º—è, –∏ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –¥–ª—è —Ç–µ–±—è –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏!`) }
    if (answer.payload && answer.payload.command == 'dialog') { 
        await Tutorial_Engine(context, answer.payload.event)
    }
}

export async function Tutorial_Starting_0_0_4(context: Context) {
    const account = await prisma.user.findFirst({ where: { idvk: context.peerId } })
    if (!account) { return }
    const person = await prisma.person.findFirst({ where: { id_user: account.id } })
    if (!person) { return }
    const keyboard = new KeyboardBuilder()
    .textButton({ label: `${smile_list.config.ico} –î–∞–ª—å—à–µ`, payload: { command: 'dialog', event: '0-0-5' }, color: 'secondary' }).row()
    .oneTime().inline()
    const answer = await context.question(`${smile_list.load.ico} –° –≥–ª—É—Ö–∏–º —É–¥–∞—Ä–æ–º –∫–∞–ø—Å—É–ª–∞ –≤—Ä–µ–∑–∞–µ—Ç—Å—è –≤ –∑–µ–º–ª—é, –∏ –≤—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ –ª—é–∫. –ü–µ—Ä–µ–¥ –≤–∞–º–∏ —Ä–∞—Å–∫–∏–Ω—É–ª–∞—Å—å –¥–∏–∫–∞—è, –Ω–µ–≤–µ–¥–æ–º–∞—è –ø—Ä–∏—Ä–æ–¥–∞, –ø–æ–ª–Ω–∞—è –∑–∞–≥–∞–¥–æ–∫ –∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π. –†–∞—Å—Ç–µ–Ω–∏—è, —Å–≤–µ—Ç—è—â–∏–µ—Å—è –≤ —Ç–µ–º–Ω–æ—Ç–µ, –∏–∑–ª—É—á–∞—é—Ç —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–µ—Ç, —Å–ª–æ–≤–Ω–æ —Å–∞–º–∏ –∑–≤–µ–∑–¥—ã —Å–ø—É—Å—Ç–∏–ª–∏—Å—å —Å –Ω–µ–±–µ—Å, —á—Ç–æ–±—ã –æ—Å–≤–µ—Ç–∏—Ç—å —ç—Ç–æ—Ç –Ω–µ–∑–Ω–∞–∫–æ–º—ã–π –º–∏—Ä. –í –≤–æ–∑–¥—É—Ö–µ –≤–∏—Ç–∞–µ—Ç –∑–∞–ø–∞—Ö —á–µ–≥–æ-—Ç–æ –¥—Ä–µ–≤–Ω–µ–≥–æ –∏ –æ–ø–∞—Å–Ω–æ–≥–æ, —Å–º–µ—Å—å –∑–µ–º–ª–∏ –∏ —Ä–∞–∑–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç —É –≤–∞—Å –º—É—Ä–∞—à–∫–∏ –ø–æ –∫–æ–∂–µ.\n–í–¥–∞–ª–µ–∫–µ —Å–ª—ã—à–µ–Ω –≥—É–ª, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –∫—Ä–æ–≤—å —Å—Ç—ã–Ω—É—Ç—å –≤ –∂–∏–ª–∞—Ö ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑–≤—É–∫, –∞ –ø—Ä–µ–¥–≤–µ—Å—Ç–∏–µ —á–µ–≥–æ-—Ç–æ —É–∂–∞—Å–Ω–æ–≥–æ, —á—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ —Ç–µ–Ω—è—Ö. –í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, –∫–∞–∫ –≤–∞—à–µ —Å–µ—Ä–¥—Ü–µ –±—å–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, –∞ –∏–Ω—Å—Ç–∏–Ω–∫—Ç—ã –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –Ω–∞ –≥—Ä–∞–Ω–∏ —á–µ–≥–æ-—Ç–æ –≤–µ–ª–∏–∫–æ–≥–æ –∏ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ.\n\n–û–∫—Ä—É–∂–∞—é—â–∏–µ –≤–∞—Å —Ä–∞—Å—Ç–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫ –ø–æ–ª–µ–∑–Ω—ã–º–∏, —Ç–∞–∫ –∏ –æ–ø–∞—Å–Ω—ã–º–∏. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö, —Å —è—Ä–∫–∏–º–∏ —Ü–≤–µ—Ç–∞–º–∏ –∏ —Å–æ—á–Ω—ã–º–∏ –ø–ª–æ–¥–∞–º–∏, –º–∞–Ω—è—Ç –≤–∞—Å, –æ–±–µ—â–∞—è —Ä–µ—Å—É—Ä—Å—ã –∏ –ø–∏—â—É. –ù–æ –¥—Ä—É–≥–∏–µ, —Å —à–∏–ø–∞–º–∏ –∏ —è–¥–æ–≤–∏—Ç—ã–º–∏ –ª–∏—Å—Ç—å—è–º–∏, –∫–∞–∂—É—Ç—Å—è –≥–æ—Ç–æ–≤—ã–º–∏ –Ω–∞–ø–∞—Å—Ç—å, –µ—Å–ª–∏ –≤—ã –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ—Å—å —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ. –í—ã –∑–∞–º–µ—á–∞–µ—Ç–µ —Å—Ç—Ä–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –Ω–∞ –∫–∞–º–Ω—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –¥—Ä–µ–≤–Ω—é—é —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—é, –æ—Å—Ç–∞–≤–∏–≤—à—É—é —Å–≤–æ–∏ —Å–ª–µ–¥—ã –≤ —ç—Ç–æ–º –º–∏—Ä–µ. –≠—Ç–∏ –∑–Ω–∞–∫–∏, –ø–æ–∫—Ä—ã—Ç—ã–µ –º—Ö–æ–º –∏ –≤—Ä–µ–º–µ–Ω–µ–º, —à–µ–ø—á—É—Ç –æ –¥–∞–≤–Ω–æ –∑–∞–±—ã—Ç—ã—Ö —Ç–∞–π–Ω–∞—Ö –∏ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –∑–Ω–∞–Ω–∏—è—Ö.\n–í–Ω–µ–∑–∞–ø–Ω–æ, –∏–∑-–∑–∞ –¥–µ—Ä–µ–≤—å–µ–≤ —Ä–∞–∑–¥–∞–µ—Ç—Å—è —Ç—Ä–µ—Å–∫, –∏ –≤—ã –≤–∏–¥–∏—Ç–µ, –∫–∞–∫ —á—Ç–æ-—Ç–æ –±–æ–ª—å—à–æ–µ –∏ —Ç–µ–º–Ω–æ–µ –¥–≤–∏–∂–µ—Ç—Å—è –≤ –≤–∞—à–µ–π —Å—Ç–æ—Ä–æ–Ω–µ. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –¥–∏–∫–∞—è —Ç–≤–∞—Ä—å, —Ç–∞–∫ –∏ –Ω–µ—á—Ç–æ –±–æ–ª–µ–µ –∑–ª–æ–≤–µ—â–µ–µ. –í–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞, –æ—Å–æ–∑–Ω–∞–≤–∞—è –æ–ø–∞—Å–Ω–æ—Å—Ç—å, –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è, –≥–æ—Ç–æ–≤—è—Å—å –∫ –≤–æ–∑–º–æ–∂–Ω–æ–π –∞—Ç–∞–∫–µ.\n\n"–ú—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã," ‚Äî –≥–æ–≤–æ—Ä–∏—Ç –õ–∏–∞–º, –µ–≥–æ –≥–æ–ª–æ—Å –ø–æ–ª–æ–Ω —Ä–µ—à–∏–º–æ—Å—Ç–∏. "–≠—Ç–∞ –ø–ª–∞–Ω–µ—Ç–∞ –ø–æ–ª–Ω–∞ —Ç–∞–π–Ω, –∏ –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å, —á—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –ø—Ä–µ–∂–¥–µ —á–µ–º –¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥."\n–í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ ‚Äî —ç—Ç–æ –∏—Å–ø—ã—Ç–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤–∞—à—É –∫–æ–º–∞–Ω–¥—É –Ω–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç—å. –í–∞—à–∞ —Å—É–¥—å–±–∞ —Ç–µ–ø–µ—Ä—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, —Å–º–æ–∂–µ—Ç–µ –ª–∏ –≤—ã —Ä–∞–∑–≥–∞–¥–∞—Ç—å –∑–∞–≥–∞–¥–∫–∏ —ç—Ç–æ–≥–æ –º–∏—Ä–∞ –∏ –≤—ã–∂–∏—Ç—å –≤ —É—Å–ª–æ–≤–∏—è—Ö, –ø–æ–ª–Ω—ã—Ö –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π –∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ—Å—Ç–∏...`, {keyboard: keyboard, attachment: image_arrive_on_planet, answerTimeLimit })
    if (answer.isTimeout) { return await context.send(`‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ, –º–∞–ª–µ—Ü! –¢—ã –Ω–µ —É—Å–ø–µ–ª –≤–≤–µ—Å—Ç–∏ –∏–º—è, –∏ —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –¥–ª—è —Ç–µ–±—è –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏!`) }
    if (answer.payload && answer.payload.command == 'dialog') { 
        await Tutorial_Engine(context, answer.payload.event)
    }
}